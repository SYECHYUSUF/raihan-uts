<!DOCTYPE html>
<html lang="id" class="dark">
<head>
    <meta charset="UTF-8">
    <title>Daftar Hasil</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
      @keyframes gradient-pan {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      .glass-card {
        background-color: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease-in-out;
      }
      .dark .glass-card {
        background-color: rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .glass-card:hover {
        box-shadow: 0 12px 48px 0 rgba(0, 0, 0, 0.3);
        transform: translateY(-5px) scale(1.01);
      }
    </style>
    <script>
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
    </script>
</head>

<body class="min-h-screen p-6 md:py-12 md:px-8 
             bg-gradient-to-br from-purple-600 via-indigo-700 to-purple-800
             dark:from-[#1A1137] dark:via-[#2F1F5A] dark:to-[#4A377D]
             bg-[length:200%_200%] animate-[gradient-pan_15s_ease_infinite]
             transition-colors duration-300">

    
<button id="theme-toggle" type="button" class="fixed top-6 right-6 p-2 rounded-lg 
                                                    text-white/70 hover:text-white dark:text-gray-400 dark:hover:text-white 
                                                    hover:bg-white/20 dark:hover:bg-gray-700/50 
                                                    focus:outline-none focus:ring-2 focus:ring-white/30 dark:focus:ring-gray-600 
                                                    transition-all duration-300 transform hover:scale-110"
                                                    data-aos="fade-left" data-aos-delay="200">
        <svg id="theme-toggle-dark-icon" class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
        <svg id="theme-toggle-light-icon" class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.707.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-1.646 5.646a1 1 0 01-1.414 0l-.707-.707a1 1 0 111.414-1.414l.707.707a1 1 0 010 1.414zM4.95 6.05a1 1 0 00-1.414 1.414l.707.707a1 1 0 001.414-1.414l-.707-.707zM3 11a1 1 0 100-2H2a1 1 0 100 2h1zM6.05 15.05a1 1 0 010-1.414l.707.707a1 1 0 011.414 1.414l-.707.707a1 1 0 01-1.414 0zM4.354 4.354a1 1 0 011.414 0l.707.707a1 1 0 01-1.414 1.414l-.707-.707a1 1 0 010-1.414z"></path></svg>
    </button>
    <div class="w-full max-w-5xl mx-auto">
        
        <div class="mb-10 text-center"
             data-aos="fade-down" data-aos-duration="1000">
            <h2 class="text-4xl font-bold text-white mb-2 [text-shadow:_0_2px_2px_rgb(0_0_0_/_0.3)]">
                Riwayat Perhitungan
            </h2>
            <p class="text-lg text-white/80">
                Semua hasil kalkulasi Anda akan tersimpan di sini.
            </p>
        </div>

        <div class="flex flex-col sm:flex-row justify-between items-center mb-8 gap-4"
             data-aos="fade-up" data-aos-delay="200">
            <a href="{{ url_for('index') }}" 
               class="px-5 py-2 w-full sm:w-auto
                      bg-gray-600 hover:bg-gray-700 
                      dark:bg-gray-700 dark:hover:bg-gray-600
                      text-white font-semibold rounded-lg shadow-md
                      transition duration-300 transform hover:scale-105 text-center">
                &larr; Halaman Utama
            </a>
            <a href="{{ url_for('kalkulator') }}" 
               class="px-5 py-2 w-full sm:w-auto
                      bg-purple-600 hover:bg-purple-700
                      dark:bg-purple-600 dark:hover:bg-purple-500
                      text-white font-semibold rounded-lg shadow-md
                      transition duration-300 transform hover:scale-105 text-center">
                Hitung Lagi &rarr;
            </a>
        </div>

        <div class="w-full">
            <div id="riwayat-grid-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                </div>

            <div id="riwayat-kosong" class="text-center py-12 px-6 glass-card rounded-lg" style="display: none;">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 mx-auto text-white/50 mb-4">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z" />
                </svg>
                <h3 class="text-2xl font-semibold text-white mb-2">Riwayat Kosong</h3>
                <p class="text-white/80">
                    Belum ada riwayat perhitungan. Silakan hitung di halaman kalkulator.
                </p>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            once: true,
            duration: 800
        });

        var themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
        var themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            themeToggleLightIcon.classList.remove('hidden');
        } else {
            themeToggleDarkIcon.classList.remove('hidden');
        }
        var themeToggleBtn = document.getElementById('theme-toggle');
        themeToggleBtn.addEventListener('click', function() {
            themeToggleDarkIcon.classList.toggle('hidden');
            themeToggleLightIcon.classList.toggle('hidden');
            if (localStorage.theme === 'dark') {
                document.documentElement.classList.remove('dark');
                localStorage.theme = 'light';
            } else {
                document.documentElement.classList.add('dark');
                localStorage.theme = 'dark';
            }
        });
    </script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const histori = JSON.parse(localStorage.getItem('riwayatPerhitungan')) || [];
            
            const container = document.getElementById('riwayat-grid-container');
            const pesanKosong = document.getElementById('riwayat-kosong');

            if (histori.length === 0) {
                pesanKosong.style.display = 'block';
                pesanKosong.setAttribute('data-aos', 'fade-up');
            } else {
                histori.forEach((item, index) => {
                    let borderColorClass = 'border-l-gray-500 dark:border-l-gray-400';
                    if (item.nama === 'Tabung') borderColorClass = 'border-l-blue-500 dark:border-l-blue-400';
                    else if (item.nama === 'Kerucut') borderColorClass = 'border-l-yellow-500 dark:border-l-yellow-400';
                    else if (item.nama === 'Bola') borderColorClass = 'border-l-red-500 dark:border-l-red-400';
                    else if (item.nama === 'Kubus') borderColorClass = 'border-l-indigo-500 dark:border-l-indigo-400';
                    else if (item.nama === 'Balok') borderColorClass = 'border-l-green-500 dark:border-l-green-400';
                    else if (item.nama === 'Limas Segiempat') borderColorClass = 'border-l-orange-500 dark:border-l-orange-400';

                    const htmlVar2 = item.label2 ? `
                        <div class="flex justify-between">
                            <span class="font-medium">${item.label2}:</span>
                            <span class="font-semibold">${item.val2}</span>
                        </div>` : '';
                    
                    const htmlVar3 = item.label3 ? `
                        <div class="flex justify-between">
                            <span class="font-medium">${item.label3}:</span>
                            <span class="font-semibold">${item.val3}</span>
                        </div>` : '';
                    
                    const card = document.createElement('div');
                    card.className = `p-5 rounded-lg shadow-xl glass-card border-l-8 ${borderColorClass}`;
                    card.setAttribute('data-aos', 'fade-up');
                    card.setAttribute('data-aos-delay', (index * 100) + 300);
                    
                    card.innerHTML = `
                        <h3 class="text-2xl font-bold text-white mb-4">${item.nama}</h3>
                        <div class="space-y-2 text-white/90 mb-4">
                            <div class="flex justify-between">
                                <span class="font-medium">${item.label1}:</span>
                                <span class="font-semibold">${item.val1}</span>
                            </div>
                            ${htmlVar2}
                            ${htmlVar3}
                        </div>
                        <hr class="my-4 border-white/20 dark:border-gray-700">
                        <div class="text-right">
                            <span class="text-sm font-medium text-white/70 block">Hasil Volume</span> 
                            <span class="font-bold text-green-400 text-3xl">${item.hasil}</span>
                        </div>
                    `;
                    
                    container.appendChild(card);
                });
            }
            
            AOS.init({
                once: true,
                duration: 800
            });
        });
    </script>
</body>
</html>